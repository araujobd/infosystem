fixtures:
    - DomainFixture
    - UserFixture
    - TokenFixture

tests:

    - name: Create a user
      url: /users
      method: POST
      request_headers:
          token: $ENVIRON['token_id']
          content-type: application/json
      data:
          name: Samuel de Medeiros Queiroz
          email: samuel@example.com
          active: true
          password: secret
          domain_id: $ENVIRON['domain_id']
      status: 201
      response_json_paths:
          $.user.domain_id: $ENVIRON['domain_id']
          $.user.name: Samuel de Medeiros Queiroz
          $.user.email: samuel@example.com
          $.user.active: true

    - name: Get the user
      url: /users/$RESPONSE['$.user.id']
      method: GET
      request_headers:
          token: $ENVIRON['token_id']
      status: 200
      response_json_paths:
          $.user.domain_id: $ENVIRON['domain_id']
          $.user.name: Samuel de Medeiros Queiroz
          $.user.email: samuel@example.com
          $.user.active: true

    - name: Delete the user
      url: /users/$RESPONSE['$.user.id']
      method: DELETE
      request_headers:
          token: $ENVIRON['token_id']
      status: 204
